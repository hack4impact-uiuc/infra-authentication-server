---
name: Register
route: /register
---

# Register


## Endpoints 
| Endpoint | /register [POST] (redirected from API to Server) |
| ------ | ----------- |
| body   | email, username, hashed password, permission level, phone number (optional) |
| response | message: success/error, jwt token if the account is authenticated |


## Register Workflow

### Step 1: Filling out the form on the client side
This includes fields for 
* email 
* username
* security questions (custom to application) 
* password (twice for good measure)<br />
Optional fields include:
* phone number<br />
Signing up with Google Accounts is also an option.

Since the form provided is a simple default form you can use, integration with the authentication server include:
* customizing the default component
* creating a new component altogether to plug into the server


### Step 2: Sends the register request to the API, redirected by the API to the authentication server, and signing it with some key that the user know. 
A request will be made to your API, which will then be redirected to the authentication server. <br />
The authentication server will only store information for these fields:
* email
* phone number (optional)
* password (hashed)
* permission level
* security questions (custom to application)

If the information is **validated** (more in next section), the server will generate a unique user id and pass it back to the API, 
aka signing it with some key that the user know. After a successful sign up, users will automatically b e logged in.
If it is invalid, we will send an error message that the dev team can display for user notice.
The API will store all other relevant information. 
The default and advanced _permission level(s)_ can be sepcified in the config file or as a dropdown on the default client side.


### Step 3: Authentication Server Validation
For signing up, we will validate a few things:
* permisison level -- is a default permission level
* username -- is unique; doesn't already exist the server database
* email is valid -- follows our regex pattern and isn't already in our database
* email is activated -- the link sent to the provided email has been clicked to set the account to validated in the server database
* strong password -- follows our regex pattern

If validated, it will add a new entry to the database with an autogenerated unique user id, email, password, permission level, security 
question, answer to the security question, time the account was created, and a boolean variable that determines if an account has been verified.

It also sends an email to the person signing up, and once they click it will verify their email address. If the account isn't verified 
after 24 hours, the credentials will no longer work. 

### Step 4: Authentication Server Response
If valid, the authentication server will encrypt a jwt token that contains the user id and permision level, and send it back to the API.

### Step 5: API Response
If valid, the API will decrypt the token, get the user id, and make an account with any other revelant information. 
The API will make a new user account with that user id, and any other information from signup that the dev team decided to add. 

It will respond to the client with a success message and the jwt token sent from the Authentication Server. This token is storred in cookies and sent with every request. 