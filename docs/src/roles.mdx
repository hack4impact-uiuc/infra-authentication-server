---
name: Roles
route: /roles
---

# Roles

## Roles - get all users below user's role

| Endpoint | /roles [GET] |
| ------ | ----------- |
| header   | token: JWT token of the user (must log in to find) |
| header | google: whether or not the user is a google user (true/false) |
| Response 200 | security question |
| Response 400 | error message |

Example:
```
{
    url: "localhost:8000/"
    headers: {
        "token": "gianttokenblobwithabunchofnumbershere"
        "google": "false"
    }
}
```

(1) If the token isn't provided, it returns the error message "Token not provided"

(2) If the token is invalid it returns "Invalid Token", and if there isn't a corresponding user, it returns ""User does not exist in the database"

(3) It looks at the user's permission level, and gets all the role's its allowed to see. 

(4) Returns user information for every one of those user's email and role



## Roles Change - change another user's role

| Endpoint | /roleschange [POST] |
| ------ | ----------- |
| header   | token: JWT token of the user (must log in to find) |
| header | google: whether or not the user is a google user (true/false) |
| body   | userEmail: email of the user to be promoted/demoted |
| body   | newRole: new role for the other user |
| body   | password: user's password (only required if user is not a google user) |
| Response 200 | success message |
| Response 400 | error message |

Example (regular user):
```
{
    url: "localhost:8000/"
    headers: {
        "token": "gianttokenblobwithabunchofnumbershere"
        "google": "false"
    }
    body:
    {
        "userEmail": "otheruser@gmail.com",
        "newRole": "supervisor",
        "password": "yourpassword"
    }
}
```
Example (google user):
```
{
    url: "localhost:8000/"
    headers: {
        "token": "gianttokenblobwithabunchofnumbershere"
        "google": "true"
    }
    body:
    {
        "userEmail": "otheruser@gmail.com",
        "newRole": "supervisor"
    }
}
```

(1) If it doesn't have a token in the header, it returns the error message "Token not provided"

(2) If the token is invalid it returns "Invalid Token", and if there isn't a corresponding user, it returns "User does not exist in the database"

(3) If it doesn't have a userEmail and newRole, it returns the error message "Malformed Request"

(4) If a user with the userEmail doesn't exist, it returns the error message "User with that email doesn't exist"

(5) If the user doesn't provide the correct password, it returns the error message "Incorrect Authentication"

(6) If the user doesn't have the permission level to promote the user, it returns the error message "Incorrect Permission Levels"

(7) Otherwise the user promotes the role of the user and sends the success message "Sucessfully set new permission level for [userEmail] to [newRole]"



