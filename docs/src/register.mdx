---
name: Register
route: /register
---

# Register

## Register Endpoint

| Endpoint | /register [POST] |
| ------ | ----------- |
| Body   | email, hashed password, amd role |
| Response 200 | userid, role, and token |
| Response 400 | error message |

(1) If the request doesn't have a body with an email, password, and role, the request will return wit the error message "Please enter valid arguments for the fields provided."

(2) Checks that there aren't any users with the same email, otherwise returns the error message ""User already exists. Please try again." 

(3) Checks that the user can sign up for that role by checking the configuration file. (eg the user can't sign up as an admin) If the user doesn't have valid permissions, it responds with ""User needs a higher permission level for that role"

(4) Creates a new user in the database. 

(5) If the config file specifies email verification, it sends an email to the user to verify their account. If the email doesn't get sent, it responds withh the error message "Verification email could not be sent despite Gmail being enabled. User not added to DB"

(6) It sends a valid jwt token, user id, and permission level to the API, along with the status message ""User added successfully!"

(7) The API sends the token to the client. The client stores the token in cookies and sends it in the header of every request. 


## Add Security Question
| Endpoint | /addSecurityQuestion [POST] |
| ------ | ----------- |
| Body   | email, hashed password, amd role |
| Response 200 | userid, role, and token |
| Response 400 | error message |

